<div class="container">
  <div *ngIf="departments.length > 2" class="mt-5 w-50 mx-auto">
    <p class="alert alert-secondary">
      departments number is {{ departments.length }}
    </p>
  </div>

  <div class="text-center">
    <button (click)="showAddBlock()" class="btn btn-success my-3">
      {{ btnLabel }}
    </button>
  </div>

  <div class="add-department-form mx-auto w-50" [hidden]="addFlag">
    <div class="form-group my-2">
      <label class="control-label">ID</label>
      <input
        [(ngModel)]="newDepartment.id"
        type="number"
        class="form-control"
      />
    </div>
    <div class="form-group my-2">
      <label class="control-label">Name</label>
      <input
        [(ngModel)]="newDepartment.name"
        type="text"
        class="form-control"
      />
    </div>

    <div class="text-center my-3">
      <button type="button" class="btn btn-success" (click)="addDepartment()">
        Save department
      </button>
    </div>
  </div>

  <table class="table text-center">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">ID</th>
        <th scope="col">Name</th>

        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="
          let department of departments;
          let i = index;
          let o = odd;
          let e = even
        "
        [ngClass]="{ 'bg-lightgrey': o }"
      >
        <td scope="row">{{ i + 1 }}</td>
        <td>{{ department.id }}</td>
        <td>{{ department.name }}</td>

        <td class="actions">
          <button
            type="button"
            class="btn btn-link me-2"
            (click)="showDepartment(department.id)"
          >
            <img src="../../../assets/info-icon.svg" width="24px" />
          </button>
          <button
            type="button"
            class="btn btn-primary me-2"
            (click)="editDepartment(department.id)"
          >
            Edit
          </button>
          <button
            type="button"
            class="btn btn-danger me-2"
            (click)="deleteDepartment(i)"
          >
            Delete
          </button>
        </td>
      </tr>
      <tr></tr>
    </tbody>
  </table>

  <!--EDIT department-->
  <div class="edit-department-form mx-auto w-50" [hidden]="editFlag">
    <div class="form-group my-2">
      <label class="control-label">ID</label>
      <input
        [(ngModel)]="selectedDepartment.id"
        type="number"
        class="form-control"
        disabled
      />
    </div>
    <div class="form-group my-2">
      <label class="control-label">Name</label>
      <input
        [(ngModel)]="selectedDepartment.name"
        type="text"
        class="form-control"
      />
    </div>

    <div class="text-center my-3">
      <button type="button" class="btn btn-success" (click)="saveEdit()">
        Confirm Edit
      </button>
    </div>
  </div>

  <div
    class="details alert alert-secondary w-50 mx-auto"
    [hidden]="detailsFlag"
  >
    <h4 class="alert-heading">
      department Details
      <button
        type="button"
        class="close btn btn-outline-secondary float-end"
        (click)="hideDetails()"
      >
        <span>&times;</span>
      </button>
    </h4>

    <div>department ID: {{ detailDepartment.id }}</div>
    <div>department Name: {{ detailDepartment.name }}</div>
  </div>
</div>
